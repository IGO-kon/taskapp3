{% extends "base.html" %}

{% block title %}æ¤œç´¢ - åœ¨åº«ç®¡ç†ã‚¢ãƒ—ãƒª{% endblock %}

{% block content %}
<div class="search-container">
    <h2>å•†å“æ¤œç´¢</h2>
    
    <form method="GET" action="{{ url_for('search') }}" class="search-form">
        <div class="search-box">
            <input type="text" name="q" value="{{ query }}" placeholder="å•†å“åã€èª¬æ˜ã€ã‚«ãƒ†ã‚´ãƒªã§æ¤œç´¢...">
            <button type="submit" class="btn btn-primary">ğŸ” æ¤œç´¢</button>
        </div>
    </form>

    {% if query %}
        <p class="search-results-info">ã€Œ{{ query }}ã€ã®æ¤œç´¢çµæœ: {{ items|length }}ä»¶</p>
        
        {% if items %}
        <div class="table-container">
            <table class="inventory-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>å•†å“å</th>
                        <th>èª¬æ˜</th>
                        <th>ã‚«ãƒ†ã‚´ãƒª</th>
                        <th>æ•°é‡</th>
                        <th>ä¾¡æ ¼</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td>{{ item.id }}</td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.description[:50] }}{% if item.description|length > 50 %}...{% endif %}</td>
                        <td>{{ item.category or '-' }}</td>
                        <td>
                            <span class="quantity-badge {% if item.quantity < 10 %}low{% elif item.quantity < 50 %}medium{% else %}high{% endif %}">
                                {{ item.quantity }}
                            </span>
                        </td>
                        <td>Â¥{{ "{:,.0f}".format(item.price) }}</td>
                        <td class="actions">
                            <a href="{{ url_for('edit_item', id=item.id) }}" class="btn btn-small btn-edit">ç·¨é›†</a>
                            <a href="{{ url_for('delete_item', id=item.id) }}" 
                               class="btn btn-small btn-delete"
                               onclick="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹?')">å‰Šé™¤</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <p>æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
